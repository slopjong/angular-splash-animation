"use strict";angular.module("sj.splash",[]).value("splashAnimationConfig",{changeInterval:4e3}).factory("wordset",function(){return{words:[],currentIndex:0,forward:function(){this.currentIndex=this.nextIndex()},nextIndex:function(){var a=this.currentIndex+1;return a===this.words.length&&(a=0),a},nextWords:function(){return this.words[this.nextIndex()]},previousIndex:function(){var a=this.currentIndex-1;return 0>a&&(a=this.words.length-1),a},previousWords:function(){return this.words[this.previousIndex()]}}}).factory("utils",function(){return{serialize:function(a){var b="{";for(var c in a)b+=c+":"+a[c]+",";return b=b.slice(0,-1),b+="}"}}}).factory("splashes",["$rootScope","$compile","utils","wordset",function(a,b,c,d){return{collection:[],create:function(d,e,f){var g='<splash bounding-client-rect="'+c.serialize(f)+'">'+e+"</splash>",h=b(g)(a.$new());return angular.isArray(this.collection[d])||(this.collection[d]=[]),this.collection[d].push(h),h},animate:function(){angular.forEach(this.collection[d.currentIndex],function(a){a.removeClass("sa-moveout"),a.addClass("sa-movein")}),angular.forEach(this.collection[d.previousIndex()],function(a){a.removeClass("sa-init"),a.removeClass("sa-movein"),a.addClass("sa-moveout")}),angular.forEach(this.collection[d.nextIndex()],function(a){a.removeClass("sa-moveout")})},init:function(a){angular.forEach(this.collection[a],function(a){a.addClass("sa-init")})}}}]).controller("SplashAnimationController",["splashAnimationConfig","$scope","$timeout","$compile","utils","wordset","splashes",function(a,b,c,d,e,f,g){angular.isDefined(b.controller)||(b.controller=this,b.wordItems=[],b.wordDomItems=[],b.wordDomItemsPlaceholder=[],b.animate=function(){f.forward(),g.animate(),angular.forEach(b.wordDomItemsPlaceholder,function(a,c){a.text(f.words[f.currentIndex][c]),b.wordDomItems[c].width(a.width())}),c(b.animate,a.changeInterval)},b.createSplashItems=function(){angular.forEach(f.words,function(a,c){angular.forEach(a,function(a,c){b.wordDomItemsPlaceholder[c].text(a)}),angular.forEach(a,function(a,d){var e=($(".sa-container")[0].getBoundingClientRect(),b.wordDomItemsPlaceholder[d]),f=e[0].getBoundingClientRect(),h={left:e.position().left,right:e.position().right,width:f.width,height:f.height},i=g.create(c,a,h);$(".sa-container").append(i)})}),angular.forEach(f.words[0],function(a,c){b.wordDomItemsPlaceholder[c].text(a)}),g.init(0)},b.initWordWidth=function(){angular.forEach(b.wordDomItemsPlaceholder,function(a,c){b.wordDomItems[c].width(a.width())})},b.startAnimation=function(){b.createSplashItems(),b.initWordWidth(),c(function(){b.animate()},a.changeInterval)})}]).directive("splash",[function(){return{restrict:"E",controller:["$scope",function(a){a.boundingClientRect={}}],template:'<div class="sa-splash" ng-style="boundingClientRect" ng-transclude></div>',replace:!0,transclude:!0,scope:{},link:function(a,b,c){angular.isDefined(c.boundingClientRect)&&(a.boundingClientRect=a.$eval(c.boundingClientRect))}}}]).directive("word",[function(){return{restrict:"E",controller:"SplashAnimationController",template:'<div class="sa-word"></div>',replace:!0,link:function(a,b,c){if(angular.isDefined(c.order)){var d=parseInt(c.order);b.parent().hasClass("sa-placeholder")?a.wordDomItemsPlaceholder[d]=$(b):a.wordDomItems[d]=$(b)}else b.parent().hasClass("sa-placeholder")?a.wordDomItemsPlaceholder.push($(b)):a.wordDomItems.push($(b))}}}]).directive("splashAnimation",["splashAnimationConfig","$timeout","wordset",function(a,b,c){return{restrict:"E",template:'<div class="sa-container">  <div class="sa-slogan" ng-transclude></div>  <div class="sa-placeholder" ng-transclude></div></div>',replace:!0,transclude:!0,controller:"SplashAnimationController",link:function(b,d,e){angular.isDefined(e.words)&&(c.words=b.$eval(e.words),1===c.words.length?(c.words[1]=c.words[0],c.words[2]=c.words[0]):2===c.words.length&&(c.words[2]=c.words[0],c.words[3]=c.words[1])),angular.isDefined(e.interval)&&(a.changeInterval=b.$eval(e.interval)),b.startAnimation()}}}]);