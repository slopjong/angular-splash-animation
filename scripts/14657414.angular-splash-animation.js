"use strict";angular.module("sj.splash",[]).value("splashAnimationConfig",{changeInterval:4e3}).factory("utils",function(){return{nextWordsIndex:function(a,b){var c=b+1;return c===a.length&&(c=0),c},nextWords:function(a,b){return a[this.nextWordsIndex(a,b)]},previousWordsIndex:function(a,b){var c=b-1;return 0>c&&(c=a.length-1),c},previousWords:function(a,b){return a[this.previousWordsIndex(a,b)]},serialize:function(a){var b="{";for(var c in a)b+=c+":"+a[c]+",";return b=b.slice(0,-1),b+="}"}}}).controller("SplashAnimationController",["splashAnimationConfig","$scope","$timeout","$compile","utils",function(a,b,c,d,e){angular.isDefined(b.controller)||(b.controller=this,b.changeInterval=a.changeInterval,b.words=[],b.currentWordsIndex=0,b.currentWords=[],b.nextWordsIndex=1,b.nextWords=[],b.wordItems=[],b.wordDomItems=[],b.wordDomItemsPlaceholder=[],b.splashItems=[],b.animate=function(){b.currentWordsIndex=e.nextWordsIndex(b.words,b.currentWordsIndex),b.currentWords=e.nextWords(b.words,b.currentWordsIndex),b.$apply(function(){angular.forEach(b.wordDomItemsPlaceholder,function(a,c){b.wordDomItems[c].width(a.width()),b.splashItems[b.currentWordsIndex][c].removeClass("sa-moveout"),b.splashItems[b.currentWordsIndex][c].addClass("sa-movein"),b.splashItems[e.previousWordsIndex(b.words,b.currentWordsIndex)][c].removeClass("sa-init"),b.splashItems[e.previousWordsIndex(b.words,b.currentWordsIndex)][c].removeClass("sa-movein"),b.splashItems[e.previousWordsIndex(b.words,b.currentWordsIndex)][c].addClass("sa-moveout"),b.splashItems[e.nextWordsIndex(b.words,b.currentWordsIndex)][c].removeClass("sa-moveout")}),c(b.animate,b.changeInterval)})},b.createSplashItems=function(){angular.forEach(b.words,function(a){var c=[];angular.forEach(a,function(a,f){var g=$(".sa-container")[0].getBoundingClientRect(),h=b.wordDomItemsPlaceholder[f],i=h[0].getBoundingClientRect();h.text(a);var j={left:i.left-g.left,right:g.right-i.right,width:i.width,height:i.height},k='<splash wordset="0"bounding-client-rect="'+e.serialize(j)+'">'+a+"</splash>",l=d(k)(b);c.push(l),$(".sa-container").append(l)}),b.splashItems.push(c)})},b.initSplashItems=function(){angular.forEach(b.splashItems[0],function(a){a.addClass("sa-init")})},angular.forEach(b.currentWords,function(a,c){b.wordDomItemsPlaceholder[c].text(a)}),b.startAnimation=function(){b.createSplashItems(),b.initSplashItems(),c(function(){b.animate()},b.changeInterval)})}]).directive("splash",[function(){return{restrict:"E",controller:["$scope",function(a){a.boundingClientRect={}}],template:'<div class="sa-splash" ng-style="boundingClientRect" ng-transclude></div>',replace:!0,transclude:!0,scope:{},link:function(a,b,c){angular.isDefined(c.boundingClientRect)&&(a.boundingClientRect=a.$eval(c.boundingClientRect))}}}]).directive("word",[function(){return{restrict:"E",controller:"SplashAnimationController",template:'<div class="sa-word"></div>',replace:!0,link:function(a,b){b.parent().hasClass("sa-placeholder")?a.wordDomItemsPlaceholder.push($(b)):a.wordDomItems.push($(b))}}}]).directive("splashAnimation",["splashAnimationConfig","$timeout",function(){return{restrict:"E",template:'<div class="sa-container"><div ng-transclude></div><div class="sa-placeholder" ng-transclude></div></div>',replace:!0,transclude:!0,controller:"SplashAnimationController",link:function(a,b,c){angular.isDefined(c.words)&&(a.words=a.$eval(c.words),a.currentWords=a.words[0]),angular.isDefined(c.interval)&&(a.changeInterval=a.$eval(c.interval)),a.startAnimation()}}}]);